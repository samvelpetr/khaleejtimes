;
(self.AMP=self.AMP||[]).push({m:0,v:"2311171837000",n:"amp-fx-flying-carpet",ev:"0.1",l:!0,f:function(t,n){!function(){var n;function i(t,n){return(i=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}Array.isArray;var f,a=Object.prototype;function u(t){return"string"==typeof(n=t)?i=n:1==(null==(r=n)?void 0:r.nodeType)&&(i=n.tagName),!(!i||!i.toLowerCase().startsWith("i-"))||t.nodeType===Node.ELEMENT_NODE&&(t.hasAttribute("placeholder")||t.hasAttribute("fallback")||t.hasAttribute("overflow"));var n,i,r}a.hasOwnProperty,a.toString;var c=["Webkit","webkit","Moz","moz","ms","O","o"];self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var l=self.__AMP_LOG;function s(t){return function(t,n){throw new Error("failed to call initLogConstructor")}()}function p(t,n,i,r,e,o,f,a,u,c,l){return t}function h(t,n,i,r,e,o,f,a,u,c,p){return(l.user||(l.user=s()),void l.user.win?l.userForEmbed||(l.userForEmbed=s()):l.user).assert(t,n,i,r,e,o,f,a,u,c,p)}function m(t){return t.nodeType?(i=t,n=(i.ownerDocument||i).defaultView,function(t,n){return v(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),"ampdoc")}(n)).getAmpDoc(t):t;var n,i}function v(t,n){p(function(t,n){var i=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!i||!i.ctor)}(t,n));var i=function(t){var n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}(t)[n];return i.obj||(p(i.ctor),p(i.context),i.obj=new i.ctor(i.context),p(i.obj),i.context=null,i.resolve&&i.resolve(i.obj)),i.obj}var y=function(t){return function(t,n){return v((i=m(t),(r=m(i)).isSingleDoc()?r.win:r),n);var i,r}(t,"owners")},x=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&i(t,n)}(s,t);var e,a,l=(e=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=r(e);if(a){var i=r(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return o(this,t)});function s(t){var n;return(n=l.call(this,t)).HJ=[],n.ett=0,n.Pb=null,n.ott=!1,n}var p=s.prototype;return p.isLayoutSupported=function(t){return"fixed-height"==t},p.isRelayoutNeeded=function(){return!0},p.buildCallback=function(){var t=this,n=this.element.ownerDocument,i=n.createElement("div");this.HJ=function(t,n){for(var i=[],r=t.firstElementChild;r;r=r.nextElementSibling)!u(r)&&i.push(r);return i}(this.element),this.Pb=i;var r=function(t,n){for(var i=[],r=t.firstChild;r;r=r.nextSibling)!u(r)&&i.push(r);return i}(this.element);this.ett=this.ftt(r).length;var e=y(this.element);this.HJ.forEach((function(n){return e.setOwner(n,t.element)}));var o=n.createElement("div");o.setAttribute("class","i-amphtml-fx-flying-carpet-clip"),i.setAttribute("class","i-amphtml-fx-flying-carpet-container"),r.forEach((function(t){return i.appendChild(t)})),o.appendChild(i),this.element.appendChild(o),this.getViewport().addToFixedLayer(i,!1)},p.Rb=function(){var t=this.element.getLayoutBox(),n=this.getViewport(),i=n.getHeight(),r=.75*i,e=n.getScrollHeight()-.95*i;h(t.top>=r,"<amp-fx-flying-carpet> elements must be positioned after the 75% of first viewport: %s Current position: %s. Min: %s",this.element,t.top,r),h(t.top<=e,"<amp-fx-flying-carpet> elements must be positioned before the last viewport: %s Current position: %s. Max: %s",this.element,t.top,e)},p.layoutCallback=function(){if(!this.ott){try{this.Rb()}catch(t){throw this.collapse(),t}this.ott=!0}var t=this.element.getLayoutSize().width;return function(t,n,i,r,e){var o=function(t,n,i){if(n.startsWith("--"))return n;f||(f=Object.create(null));var r=f[n];if(!r||i){if(r=n,void 0===t[n]){var e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),o=function(t,n){for(var i=0;i<c.length;i++){var r=c[i]+n;if(void 0!==t[r])return r}return""}(t,e);void 0!==t[o]&&(r=o)}i||(f[n]=r)}return r}(t.style,n,e);if(o){var a,u=r?i+r:i;t.style.setProperty((a=o.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()})),c.some((function(t){return a.startsWith(t+"-")}))?"-".concat(a):a),u)}}(this.Pb,"width",t,"px"),y(this.element).scheduleLayout(this.element,this.HJ),this.att(),this.utt(),n||(n=Promise.resolve(void 0))},p.utt=function(){var t=this;new this.win.IntersectionObserver((function(n){var i=n[n.length-1];t.Pb.classList.toggle("i-amphtml-fx-flying-carpet-container-fix",i.isIntersecting)}),{threshold:.01}).observe(this.element)},p.att=function(){var t=this;new MutationObserver((function(n){for(var i=0;i<n.length;i++){var r=n[i].addedNodes;if(r)for(var e=0;e<r.length;e++){var o=r[e];o.signals&&o.signals().whenSignal("built").then(t.ctt.bind(t,o))}}})).observe(this.element,{childList:!0,subtree:!0})},p.ctt=function(t){var n=t;n.getOwner()===this.element&&y(this.element).scheduleLayout(this.element,n)},p.collapsedCallback=function(t){var n=this.HJ.indexOf(t);if(n>-1&&(this.HJ.splice(n,1),this.ett--,0==this.ett))return this.attemptCollapse().catch((function(){}))},p.getChildren=function(){return this.HJ},p.ftt=function(t){return t.filter((function(t){return 1===t.nodeType||3===t.nodeType&&/\S/.test(t.textContent)}))},s}(t.BaseElement);t.registerElement("amp-fx-flying-carpet",x,"amp-fx-flying-carpet{position:relative!important;box-sizing:border-box!important}amp-fx-flying-carpet>.i-amphtml-fx-flying-carpet-clip{position:absolute!important;top:0!important;left:0!important;width:100%!important;height:100%!important;border:0!important;margin:0!important;padding:0!important;clip:rect(0,auto,auto,0)!important;-webkit-clip-path:polygon(0px 0px,100% 0px,100% 100%,0px 100%)!important;clip-path:polygon(0px 0px,100% 0px,100% 100%,0px 100%)!important}amp-fx-flying-carpet>.i-amphtml-fx-flying-carpet-clip>.i-amphtml-fx-flying-carpet-container{position:fixed!important;top:0!important;width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}amp-fx-flying-carpet>.i-amphtml-fx-flying-carpet-clip>.i-amphtml-fx-flying-carpet-container.i-amphtml-fx-flying-carpet-container-fix{-webkit-transform:translateZ(0)!important}.i-amphtml-fx-flying-carpet-container>.i-amphtml-layout-fixed-height,.i-amphtml-fx-flying-carpet-container>.i-amphtml-layout-responsive{-ms-flex-item-align:stretch;align-self:stretch}\n/*# sourceURL=/extensions/amp-fx-flying-carpet/0.1/amp-fx-flying-carpet.css*/")}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-fx-flying-carpet-0.1.js.map